<html><head>
<script>
var cycle_idx = {};
var cycle_groups = {};
var cycle_ims = {};
var vid_focus = null;

// http://stackoverflow.com/questions/164397/javascript-how-do-i-print-a-message-to-the-error-console
function log(msg) {
  setTimeout(function() {
    throw new Error(msg);
  }, 0);
}
                
function mod(x, modulus) {
   if (x < 0) {
      x += Math.ceil(-x/modulus)*modulus;
   }
   return x % modulus;
}

function cycle(group, dim, delta, fast, ask) {
//  alert("group = " + group);
//  alert("in cycle_groups " + (group in cycle_groups));
//log('cycle called');
  var exact = -1;
  if (ask) {
    exact = parseInt(prompt("Frame number", "0"))
  } else if (fast) {
    delta *= 10;
  }
  for (var i = 0; i < cycle_groups[group].length; i++) {
    var id = cycle_groups[group][i];
    var ims = cycle_ims[id];
    cycle_idx[id][dim] = mod((exact < 0 ? cycle_idx[id][dim] + delta : exact), (dim == 0 ? ims.length : ims[cycle_idx[id][0]].length));
    //log(cycle_idx[id]);
    // clamp the other index
    cycle_idx[id][1-dim] = Math.max(0, Math.min(cycle_idx[id][1-dim], (dim == 1 ? ims.length : ims[cycle_idx[id][0]].length)));
    document.getElementById(id).src = ims[cycle_idx[id][0]][cycle_idx[id][1]];
  }
}


// the row is controlled by the number keys; column by clicking
function switch_row(e, group) {
//log('sr');
  for (var i = 0; i < cycle_groups[group].length; i++) {
     var id = cycle_groups[group][i];
     var ims = cycle_ims[id];
     // 1 - 9 ==> 0 - 8;
     var s = 48; // ascii '1'
     var n = e.charCode - s - 1;
     if (0 <= n && n < ims.length) {
        if (!(id in cycle_idx)) {
           cycle_idx[id] = [0, 0];
        }
        cycle_idx[id][0] = n;
        cycle_idx[id][1] = mod(cycle_idx[id][1], ims[n].length);
        document.getElementById(id).src = ims[cycle_idx[id][0]][cycle_idx[id][1]];
     }
   }
}

var curr_cycle_group = null;
//document.onkeypress = function(e) {
//  if (curr_cycle_group != null) {
//    switch_row(e, curr_cycle_group);
//  }
//}

document.onkeydown = function (e) {
 if (vid_focus != null && vid_focus.paused) {
    // rough estimate
    var frame_duration = 1./30;
    var vf = vid_focus;
     // 37 39 are left/right
    if (String.fromCharCode(e.keyCode) == 'O') {
      vf.currentTime = Math.max(vf.currentTime - frame_duration, 0);
    } else if (String.fromCharCode(e.keyCode) == 'P') {
      vf.currentTime = Math.min(vf.currentTime + frame_duration, vf.duration);
    }
    return true;
  } else if (curr_cycle_group != null) {
    switch_row(e, curr_cycle_group);
  }
};


function register_cycle(group, id, ims, start) {
  if (!(id in cycle_ims)) {
    if (!(group in cycle_groups)) {
      cycle_groups[group] = [];
    }
    cycle_groups[group].push(id);
    cycle_ims[id] = ims;
    cycle_idx[id] = start;
  }
}

</script>
<title>10:17 AM Tue</title></head><body><table border = 1><tr><td><img src = "ao_Rns5cT.png" id = "0.438217315094" onmouseover = 'curr_cycle_group = "0.028383157492";' onclick = 'cycle("0.028383157492", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.028383157492", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.028383157492", "0.438217315094", [["ao_Rns5cT.png", "ao_x9hER1.png"]], [0, 0]);'>
<tr><td><img src = "ao_jKW1Pi.png" id = "0.400834962292" onmouseover = 'curr_cycle_group = "0.206898018999";' onclick = 'cycle("0.206898018999", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.206898018999", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.206898018999", "0.400834962292", [["ao_jKW1Pi.png", "ao_eXlgDI.png"]], [0, 0]);'>
<tr><td><img src = "ao_aDRKnJ.png" id = "0.585267637721" onmouseover = 'curr_cycle_group = "0.415455836624";' onclick = 'cycle("0.415455836624", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.415455836624", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.415455836624", "0.585267637721", [["ao_aDRKnJ.png", "ao_E4XQhx.png"]], [0, 0]);'>
<tr><td><img src = "ao_qEaHpU.png" id = "0.672918745874" onmouseover = 'curr_cycle_group = "0.952069520038";' onclick = 'cycle("0.952069520038", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.952069520038", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.952069520038", "0.672918745874", [["ao_qEaHpU.png", "ao_Nkm4rD.png"]], [0, 0]);'>
<tr><td><img src = "ao_KKSeTO.png" id = "0.839129054836" onmouseover = 'curr_cycle_group = "0.797488865432";' onclick = 'cycle("0.797488865432", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.797488865432", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.797488865432", "0.839129054836", [["ao_KKSeTO.png", "ao_9AkewT.png"]], [0, 0]);'>
<tr><td><img src = "ao_Pde6wg.png" id = "0.63680979405" onmouseover = 'curr_cycle_group = "0.158220962167";' onclick = 'cycle("0.158220962167", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.158220962167", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.158220962167", "0.63680979405", [["ao_Pde6wg.png", "ao_K4vm1z.png"]], [0, 0]);'>
<tr><td><img src = "ao_uWOG8m.png" id = "0.383586658444" onmouseover = 'curr_cycle_group = "0.474083127259";' onclick = 'cycle("0.474083127259", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.474083127259", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.474083127259", "0.383586658444", [["ao_uWOG8m.png", "ao_GsS2Iz.png"]], [0, 0]);'>
<tr><td><img src = "ao__ghvGI.png" id = "0.384651284311" onmouseover = 'curr_cycle_group = "0.0807274351329";' onclick = 'cycle("0.0807274351329", 1, 1, event.shiftKey, event.ctrlKey)', oncontextmenu = 'cycle("0.0807274351329", 1, -1, event.shiftKey, event.ctrlKey); return false;' onload = 'register_cycle("0.0807274351329", "0.384651284311", [["ao__ghvGI.png", "ao_yJaNP3.png"]], [0, 0]);'></table><br></html>